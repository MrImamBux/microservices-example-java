FROM openjdk:8-jre-alpine

ARG DISCOVERY_SERVICE_URI
ARG CONFIGURATION_SERVER_URI
ARG LOGGING_GUI_URI
ARG DISCOVERY_SERVICE_PORT
ARG CONFIGURATION_SERVER_PORT
ARG LOGGING_GUI_PORT

# sets environment variable
ENV DISCOVERY_SERVICE_URI ${DISCOVERY_SERVICE_URI}
ENV CONFIGURATION_SERVER_URI ${CONFIGURATION_SERVER_URI}
ENV LOGGING_GUI_URI ${LOGGING_GUI_URI}
ENV DISCOVERY_SERVICE_PORT ${DISCOVERY_SERVICE_PORT}
ENV CONFIGURATION_SERVER_PORT ${CONFIGURATION_SERVER_PORT}
ENV LOGGING_GUI_PORT ${LOGGING_GUI_PORT}

RUN mkdir /usr/local/routing-service

# copy resources from local to docker
ADD @ARTIFACT@ /usr/local/routing-service
ADD ./run.sh run.sh

# provide execute permissions and execute the scripts
RUN chmod +x run.sh
CMD ./run.sh